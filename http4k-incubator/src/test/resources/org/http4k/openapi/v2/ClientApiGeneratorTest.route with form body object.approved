>>>TitleClient.kt

package testPackage.client

import kotlin.Boolean
import kotlin.Int
import org.http4k.core.Body
import org.http4k.core.HttpHandler
import org.http4k.core.Method
import org.http4k.core.Request
import org.http4k.core.with
import org.http4k.lens.FormField
import org.http4k.lens.Validator.Strict
import org.http4k.lens.WebForm
import org.http4k.lens.boolean
import org.http4k.lens.int
import org.http4k.lens.webForm

class TitleClient(
	private val httpHandler: HttpHandler
) {
	fun endpoint(required: Boolean, optional: Int?) {

		val requiredLens = FormField.boolean().required("required")
		val optionalLens = FormField.int().optional("optional")
		val formLens = Body.webForm(Strict, requiredLens, optionalLens).toLens()
		val request = WebForm()
			.with(requiredLens of required)
			.with(optionalLens of optional)

		val httpReq = Request(Method.POST, "/formbody")
			.with(formLens of request)

		httpHandler(httpReq)
	}
}
